# シニアエンジニア・コードレビューチェックリスト

シニアエンジニアとして、単なる構文の修正だけでなく、システムの長期的な保守性、スケーラビリティ、堅牢性を担保する責務があります。

## 1. アーキテクチャと設計 (最重要)
- [ ] **SOLID原則**: クラスや関数は単一の責任を持っているか(SRP)？ 依存性は注入されているか(DIP)？ 拡張に対して開いており、修正に対して閉じているか(OCP)？
- [ ] **DRY (Don't Repeat Yourself)**: 重複したロジックはないか？ 共通化すべきか？
- [ ] **KISS (Keep It Simple, Stupid)**: 過剰設計になっていないか？ もっとシンプルに書けないか？
- [ ] **デザインパターン**: 適切なパターンが使われているか？ (Factory, Singleton, Strategyなど)
- [ ] **レイヤー構造**: アーキテクチャのレイヤーを守っているか？ (例: DBアクセスはRepository層、ビジネスロジックはService層など)

## 2. パフォーマンスとスケーラビリティ
- [ ] **データベースクエリ**: N+1問題はないか？ インデックスは適切に使われているか？
- [ ] **メモリ管理**: 不要に大量のデータをメモリに読み込んでいないか？
- [ ] **計算量**: O(n^2) になるようなネストしたループや非効率な処理はないか？
- [ ] **キャッシュ**: この処理結果はキャッシュすべきではないか？

## 3. セキュリティ (重要)
- [ ] **インジェクション対策**: 入力はサニタイズされているか？ (SQLインジェクション, XSS)
- [ ] **認証・認可**: 重要なエンドポイントは保護されているか？
- [ ] **データ漏洩**: ログやレスポンスに機密情報 (パスワード, トークン) が含まれていないか？
- [ ] **入力バリデーション**: 外部からの入力は厳格に検証されているか？

## 4. 可読性と保守性
- [ ] **命名**: 変数名・関数名は「意図」を表しているか？ (例: `code1` ではなく `userStatus`)
- [ ] **コメント**: 「何をしているか」ではなく「なぜそうしているか」が書かれているか？ (コード自体がドキュメントになるのが理想)
- [ ] **マジックナンバー**: 定数化されているか？
- [ ] **複雑度**: 循環的複雑度が高すぎないか？ 関数を分割すべきではないか？

## 5. エラーハンドリングとログ
- [ ] **例外処理**: 例外は適切に処理されているか？ (握りつぶしていないか？)
- [ ] **ユーザーフィードバック**: エラーメッセージは親切か？ (ただし内部情報を漏らしていないか？)
- [ ] **ロギング**: 本番障害時の調査に十分なログが出力されているか？

## 6. テスト
- [ ] **カバレッジ**: 新しいロジックやエッジケースのカバレッジは十分か？
- [ ] **結合テスト**: 必要な結合テストは追加されたか？
- [ ] **テストの質**: テストコードは読みやすく保守しやすいか？ 実装の詳細ではなく「振る舞い」をテストしているか？
